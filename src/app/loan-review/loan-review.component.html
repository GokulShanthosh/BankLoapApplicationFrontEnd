<!-- loan-review.component.html -->
<div class="review-container" @fadeIn *ngIf="formData; else noData">
  <!-- Header Section -->
  <div class="header-section">
    <h2 class="text-center">Review Your {{loanType | titlecase}} Loan Application</h2>
    
    <!-- Progress Indicator -->
    <div class="progress-indicator">
      <div class="progress-line"></div>
      <div class="progress-fill"></div>
      <div class="progress-circle active">
        <mat-icon>check_circle</mat-icon>
      </div>
    </div>
  </div>

  <!-- Personal Details -->
  <div class="review-section" [@slideInRight]>
    <h3><mat-icon>person</mat-icon> Personal Details</h3>
    <div class="detail-grid">
      <div class="detail-item">
        <span class="detail-label">Name:</span>
        <span class="detail-value">{{formData.personalDetails.applicantName}}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Date of Birth:</span>
        <span class="detail-value">{{formData.personalDetails.dob | date}}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Gender:</span>
        <span class="detail-value">{{formData.personalDetails.gender | titlecase}}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Email:</span>
        <span class="detail-value">{{formData.personalDetails.emailId}}</span>
      </div>
      <div class="detail-item full-width">
        <span class="detail-label">Residential Address:</span>
        <span class="detail-value">{{formData.personalDetails.residentialAddress}}</span>
      </div>
    </div>
  </div>

  <!-- Bank Details -->
  <div class="review-section" [@slideInRight]>
    <h3><mat-icon>account_balance</mat-icon> Bank Details</h3>
    <div class="detail-grid">
      <div class="detail-item">
        <span class="detail-label">Bank Name:</span>
        <span class="detail-value">{{formData.bankDetails.bankName}}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Account Number:</span>
        <span class="detail-value">{{formData.bankDetails.accountNumber}}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">IFSC Code:</span>
        <span class="detail-value">{{formData.bankDetails.ifscCode}}</span>
      </div>
    </div>
  </div>

  <!-- Loan Details -->
  <div class="review-section" [@slideInRight]>
    <h3><mat-icon>request_quote</mat-icon> Loan Details</h3>
    <div class="detail-grid">
      <div class="detail-item">
        <span class="detail-label">Loan Amount:</span>
        <span class="detail-value">₹{{formData.loanDetails.loanAmount | number}}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Tenure:</span>
        <span class="detail-value">{{formData.loanDetails.loanTenure}} years</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Purpose:</span>
        <span class="detail-value">{{formData.loanDetails.loanPurpose | titlecase}}</span>
      </div>
    </div>
  </div>

  <!-- Calculations -->
  <div class="loan-calculations" [@fadeInUp]>
    <h3><mat-icon>calculate</mat-icon> Loan Breakdown</h3>
    <div class="calculation-grid">
      <div class="calculation-item highlight">
        <span class="calc-label">Monthly EMI</span>
        <span class="calc-value">₹{{emi | number}}</span>
      </div>
      <div class="calculation-item">
        <span class="calc-label">Interest Rate</span>
        <span class="calc-value">{{interestRate}}%</span>
      </div>
      <div class="calculation-item">
        <span class="calc-label">Total Payable</span>
        <span class="calc-value">₹{{totalAmount | number}}</span>
      </div>
    </div>
  </div>

  <!-- Terms & Conditions -->
  <div class="terms-conditions" [@fadeIn]>
    <h3><mat-icon>gavel</mat-icon> Terms & Conditions</h3>
    <div class="terms-content">
      <p>By submitting this application, I confirm that:</p>
      <ul>
        <li>All information provided is accurate and complete</li>
        <li>I agree to the credit check and verification process</li>
        <li>I understand the terms of repayment</li>
        <li>I accept the processing fee of ₹{{processingFee | number}}</li>
      </ul>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="action-buttons" [@staggerSlide]>
    <button class="btn btn-edit" (click)="editApplication()">
      <mat-icon>edit</mat-icon> Edit Application
    </button>
    <button class="btn btn-submit" (click)="submitApplication()">
      <mat-icon>check_circle</mat-icon> Submit Application
    </button>
  </div>
</div>

<ng-template #noData>
  <div class="no-data-found" [@fadeInUp]>
    <div class="no-data-content">
      <mat-icon class="error-icon">error_outline</mat-icon>
      <h3>No Application Found</h3>
      <p>Please complete the loan application form first</p>
      <button class="btn btn-primary" [routerLink]="['/user-dashboard/apply-form']">
        <mat-icon>arrow_forward</mat-icon> Start Application
      </button>
    </div>
  </div>
</ng-template>